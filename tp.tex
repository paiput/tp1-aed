\documentclass[10pt,a4paper]{article}

\input{AEDmacros}
\usepackage{caratula}
\usepackage{hyperref}

\titulo{Trabajo Práctica 1}
\subtitulo{Especificación de TADs}

\fecha{\today}

\materia{Materia de la carrera}
\grupo{Grupo Almendra}

\integrante{Apellido, Nombre1}{001/01}{email1@dominio.com}
\integrante{Apellido, Nombre2}{002/01}{email2@dominio.com}
\integrante{Apellido, Nombre3}{003/01}{email3@dominio.com}
\integrante{Yu, Patricio}{1247/24}{yupatricio0@gmail.com}

% Document
\begin{document}
\maketitle

\section{Renombres de tipo}
En lugar de \textcolor{red}{\textit{tuplas}} utilizaremos \textcolor{red}{\textit{strutcs}} para una mejor legibilidad de la especificacion a lo largo del documento.
\subsection{Tipo: \textit{usuario}}
El usuario consta de un \textit{id\_usuario} y una cantidad de \textit{cant\_berretacoin}, ambos enteros positivos, realizaremos el siguiente renombre de tipo:

\vspace{0.3cm}
\noindent
\fbox{
    \begin{minipage}{\dimexpr\textwidth-2\fboxsep-2\fboxrule}
        \textit{usuario} \textbf{ES} struct$<$id\_usuario: \ent, cant\_berretacoin: \ent$>$
    \end{minipage}
}
\vspace{0.1cm}

\subsection{Tipo: \textit{transaccion}}
Por definicion del problema sabemos que una transaccion es una cuadru-pla que consta de un \textit{id\_transaccion}, \textit{id\_comprador}, \textit{id\_vendedor}, \textit{monto}, todos enteros positivos, realizaremos el siguiente renombre de tipo:

\vspace{0.3cm}
\noindent
\fbox{
    \begin{minipage}{\dimexpr\textwidth-2\fboxsep-2\fboxrule}
        \textit{transaccion} \textbf{ES} struct$<$id\_transaccion: \ent, id\_comprador: \ent, id\_vendedor: \ent, monto: \ent$>$
    \end{minipage}
}
\vspace{0.1cm}

\subsection{Tipo: \textit{bloque}}
Un bloque tiene un \textit{id\_bloque} que se representa con un entero positivo y puede tener hasta 50 \textit{transacciones}:

\vspace{0.3cm}
\noindent
\fbox{
    \begin{minipage}{\dimexpr\textwidth-2\fboxsep-2\fboxrule}
        \textit{bloque} \textbf{ES} struct$<$id\_bloque: \ent, transacciones: \TLista{transaccion}$>$
    \end{minipage}
}
\vspace{0.1cm}

\section{Definicion del TAD}
\noindent
\fbox{
    \begin{minipage}{\dimexpr\textwidth-2\fboxsep-2\fboxrule}
        \raggedright
        \vspace{0.2cm}
        TAD \$Berretacoin \{ \\
        \null \qquad obs bloques: \TLista{bloque} \\
        \null \qquad obs usuarios: \TLista{usuario}

        % ----------------PROCEDIMIENTOS----------------
        \setlength{\leftskip}{2em}
        \begin{proc}{nuevoBerretacoin}{\In{usuarios: \TLista{usuario}}}{Berretacoin \space \{}
            \asegura{res.bloques = \big[ \ \big]}
            \asegura{res.usuarios = usuarios \ \land \ |usuarios| \ge 1}
            \asegura{\paraTodo[unalinea]{i}{\ent}{(0 \le i < |res.usuarios|) \implicaLuego (res.usuarios[i].cant\_berretacoin = 0)}}
            \asegura{\paraTodo[unalinea]{i}{\ent}{(0 \le i < |res.usuarios|) \implicaLuego (esEnteroPositivo(res.usuarios[i].id\_usuario))\yLuego \lnot (hayRepetidos(res.usuarios,\ res.usuarios[i].id\_usuario))}}
        \end{proc} \}
        \vspace{0.5em}
        \begin{proc}{agregarBloque}{}{\ent \space \{}
            \requiere{True}
            \asegura{True}
        \end{proc} \} \\[0.5em]
        % ----------------PREDICADOS----------------
        \pred{hayRepetidos}{s: \TLista{T}, e: T}{
            \qquad\quad \left(\sum_{i = 0}^{|s| - 1} ifThenElseFi(s[i] = e, 1, 0)\right) \ge 2
        }
        \vspace{0.5em}
        \pred{esEnteroPositivo}{n: \ent}{
            \qquad\quad x \ge 0
        }
        \setlength{\leftskip}{0pt}\}
        \vspace{0.2cm}
    \end{minipage}
}

\end{document}